{"mappings":"AAAA,MAAMA,EAAW,CACfC,UAAWC,SAASC,cAAc,kBAClCC,QAASF,SAASC,cAAc,kBAI5BE,EACI,kEADJA,EAEE,aAFFA,EAGG,kBAHHA,EAIE,QAGR,IAAIC,EAAO,EAwBX,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,EAACC,YAAEA,EAAWC,eAAEA,EAAcC,aAAEA,EAAYC,aAAEA,KAC5C,8CAEEH,EACI,kCAAoCA,EACpCL,WACIM,GAAkBN,4EAEAM,GAAkBN,wBACvCO,GAAgBP,oCAChBQ,GAAgBR,oDAI1BS,KAAK,G,CAGV,SAASC,EAAaC,EAAc,KAClC,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,KAAMH,EACNI,QAAS,qCAGX,OAAOC,MACL,oDAAoDJ,KACpDK,MAAKC,IACL,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAM,SAElB,OAAOF,EAAKG,MAAM,G,CAtDtB1B,EAASI,QAAQuB,iBAAiB,SAElC,WACIrB,GAAQ,EACRS,EAAaT,GACVgB,MAAKM,IACJ5B,EAASC,UAAU4B,mBACjB,YACAtB,EAAaqB,EAAKE,UAEhBF,EAAKT,MAAQS,EAAKG,aACpB/B,EAASI,QAAQ4B,UAAUC,QAAQ,YAAa,mBAAmB,IAGtEC,OAAMC,IACLnC,EAASC,UAAU4B,mBACjB,YACAtB,EAAaqB,KAAKE,SACnB,G,IA4CTf,IACKO,MAAKM,IACFQ,QAAQC,IAAIT,GACZ5B,EAASC,UAAU4B,mBAAmB,YAAatB,EAAaqB,EAAKE,UAEjEF,EAAKT,KAAOS,EAAKG,aACjB/B,EAASI,QAAQ4B,UAAUC,QAAQ,mBAAoB,YAAY,IAG1EC,OAAOC,IACJnC,EAASC,UAAU4B,mBAAmB,YAAatB,EAAaqB,KAAKE,SAAS","sources":["src/index.js"],"sourcesContent":["const elements = {\n  container: document.querySelector('.js-movie-list'),\n  loadBtn: document.querySelector('.js-load-more'),\n};\n\n\nconst defaults = {\n  poster: 'https://eticketsolutions.com/demo/themes/e-ticket/img/movie.jpg',\n  date: 'XXXX-XX-XX',\n  title: 'Title not found',\n  vote: 'XX.XX',\n};\n\nlet page = 1;\n\nelements.loadBtn.addEventListener('click', handlerLoadMore);\n\nfunction handlerLoadMore() {\n    page += 1;\n    serviceFilms(page)\n      .then(data => {\n        elements.container.insertAdjacentHTML(\n          'beforeend',\n          createMarkup(data.results)\n        );\n        if (data.page >= data.total_pages) {\n          elements.loadBtn.classList.replace('load-more', 'load-more-hidden');\n        }\n      })\n      .catch(err => {\n        elements.container.insertAdjacentHTML(\n          'beforeend',\n          createMarkup(data.results)\n        );\n      });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, original_title, release_date, vote_average }) =>\n        `<li class=\"movie-card\">\n        <img src=\"${\n          poster_path\n            ? 'https://image.tmdb.org/t/p/w300' + poster_path\n            : defaults.poster\n        }\" alt=\"${original_title || defaults.title}\">\n        <div class=\"movie-info\">\n          <h2 class=\"movie-title\">${original_title || defaults.title}</h2>\n          <p>${release_date || defaults.date}Release Date:</p>\n          <p>${vote_average || defaults.vote}Vote Average:</p>\n        </div>\n      </li>`\n    )\n    .join('');\n}\n\nfunction serviceFilms(currentPage = '1') {\n  const params = new URLSearchParams({\n    page: currentPage,\n    api_key: '54c7b027f5cdebd977d4a2cb3ecddc3d',\n  });\n  \n  return fetch(\n    `https://api.themoviedb.org/3/trending/movie/week?${params}`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error('Error');\n    }\n    return resp.json();\n  });\n\n  // fetch(\n  //   `https://api.themoviedb.org/3/trending/movie/week?api_key=54c7b027f5cdebd977d4a2cb3ecddc3d&page=${page}`\n  // );\n}\n\nserviceFilms()\n    .then(data => { \n        console.log(data);\n        elements.container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n\n        if (data.page < data.total_pages) {\n            elements.loadBtn.classList.replace('load-more-hidden', 'load-more')\n        }\n    })    \n    .catch((err) => {\n        elements.container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n  });\n"],"names":["$1f0dc3b9307be026$var$elements","container","document","querySelector","loadBtn","$1f0dc3b9307be026$var$defaults","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$createMarkup","arr","map","poster_path","original_title","release_date","vote_average","join","$1f0dc3b9307be026$var$serviceFilms","currentPage","params","URLSearchParams","page","api_key","fetch","then","resp","ok","Error","json","addEventListener","data","insertAdjacentHTML","results","total_pages","classList","replace","catch","err","console","log"],"version":3,"file":"index.640786b7.js.map"}